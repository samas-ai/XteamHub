{% extends 'games/base.html' %}
{% load static %}

{% block title %}Home - XteamHub{% endblock %}

{% block header %}
<header>
    <div class="logo">
        <img src="{% static 'images/logo.png' %}" alt="XteamHub Logo" class="logo-image">
    </div>
    <nav>
        <ul class="nav-list">
            <li class="nav-list-item">
                <a href="{% url 'home' %}" {% if request.path == '/' %}class="chosed_page"{% endif %}>Home</a>
            </li>
            <li class="nav-list-item">
                <a href="{% url 'game-pass' %}" {% if request.path == '/game-pass/' %}class="chosed_page"{% endif %}>Game pass</a>
            </li>
            <li class="nav-list-item"><a href="#">Amigos</a></li>
            <li class="nav-list-item"><a href="#">Suporte</a></li>
            <li class="nav-list-item"><a href="#">Tema</a></li>
        </ul>
    </nav>

    <div class="perfil-container">
        <div>
            <img src="{% static 'images/foto_mateus_lima.jpg' %}" alt="Imagem de perfil" class="perfil-image">
        </div>
        <div class="perfil-info">
            <h2 id="perfil">Matheus Lima</h2>
        </div>
    </div>
</header>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/home_styles.css' %}">
{% endblock %}

{% block content %}
<main class="home-container">

    <section class="intro">
        <h2>Receba! Suas horas jogadas nos últimos dias</h2>
        <div class="grafico-box">
            <canvas id="myChart"></canvas>
        </div>
    </section>

    <section class="ranking-section">
        <h2>Jogos mais jogados com amigos</h2>
        <h3>Horas Jogadas por Jogo</h3>
        <button onclick="adicionarHoras()">Adicionar Horas Aleatórias</button>

        <div class="ranking-container">
            <table id="rankingTable">
                <thead>
                    <tr>
                        <th>Posição</th>
                        <th>Nome</th>
                        <th>Jogo</th>
                        <th>Horas Jogadas</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Preenchido via JS -->
                </tbody>
            </table>

            <div class="grafico-box">
                <canvas id="graficoHoras"></canvas>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <h2>Recomendados do Momento</h2>
        <div class="carousel-wrapper">
            <div class="carousel">
                <div class="slide active">
                    <img src="{% static 'images/ds2.jpg' %}" alt="Slide 1">
                </div>
                <div class="slide">
                    <img src="{% static 'images/elden_ring.jpg' %}" alt="Slide 2">
                </div>
                <div class="slide">
                    <img src="{% static 'images/sekiro.jpg' %}" alt="Slide 3">
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prevSlide">◀</button>
                <button id="nextSlide">▶</button>
            </div>
        </div>
    </section>

    <footer class="footer-home">
        <p>&copy; 2025 - XteamHub</p>
    </footer>

</main>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    window.adicionarHoras = function () {
        let randomIndex = Math.floor(Math.random() * registros.length);
        registros[randomIndex].horas += Math.floor(Math.random() * 5) + 1;
        atualizarTabela();
    };
</script>
<script src="{% static 'js/home_script.js' %}"></script>
{% endblock %}